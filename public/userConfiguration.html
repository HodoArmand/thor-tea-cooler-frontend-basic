<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TTC | 👤 Configuration</title>
    <link rel="icon" type="image/svg+xml" href="./img/TTC_logo.svg">

    <script src="./js/lib/axios.min.js"></script>
    <script src="./js/lib/svg-inject.min.js"></script>
    <script src="./js/lib/preline_darkmodeSwitcher.js"></script>

    <link href="./css/tea.css" rel="stylesheet">
    <script type="module" src="./js/ttcClient.js"></script>

</head>
<body class="config-body">
<header class="app-header">
    <nav class="w-full mx-auto px-4 sm:flex sm:items-center sm:justify-between" aria-label="Global">
        <div class="flex items-center justify-between">
            <a class="flex flex-row items-center gap-x-2 text-xl font-semibold text-emerald-800 dark:text-green-50" href="./">
                <img src="./img/TTC_logo.svg" class="icon-2xl" alt="TTC">
                <h1 class="hidden md:inline w-64 italic">Thor Tea Cooler</h1>
                <h1 class="inline md:hidden w-32 italic">TTC</h1>
            </a>
            <div id="mobileNavBarMenuToggleButton" class="sm:hidden">
                <button type="button" class="hs-collapse-toggle p-2 nav-button"
                        data-hs-collapse="#navbar-image-and-text-1" aria-controls="navbar-image-and-text-1" aria-label="Toggle navigation">
                    <img class="hs-collapse-open:hidden icon-md injectable" src="img/nav-menu-bars.svg" alt="≡">
                    <img class="hs-collapse-open:block hidden icon-md injectable" src="img/nav-menu-opened.svg" alt="X">
                </button>
            </div>
        </div>
        <div id="navbar-image-and-text-1" class="hs-collapse hidden overflow-hidden transition-all duration-300 basis-full grow sm:block">
            <div class="flex flex-col gap-5 mt-5 sm:flex-row sm:items-center sm:justify-end sm:mt-0 sm:pl-5 sm:pr-2">
                <a href="./" class="nav-items">
                    <img src="img/mug.svg" class="injectable icon-md" alt="☕">
                    <div>Tea Cooler</div>
                </a>
                <a href="./configuration" class="nav-items-active">
                    <img src="img/gear.svg" class="injectable icon-md" alt="⚙">
                    <div>Configuration</div>
                </a>
                <button onclick="ttcClient.logout()" class="nav-items-logout">
                    <img src="img/logout.svg" class="injectable icon-md" alt="🚪">
                    <span>Log out</span>
                </button>
                <a class="hs-dark-mode-active:hidden flex hs-dark-mode nav-text flex-row space-x-2"
                   href="#!" data-hs-theme-click-value="dark">
                    <img src="img/moon.svg" class="injectable icon-md" alt="☾">
                    <div class="sm:hidden">Light/Dark mode</div>
                </a>
                <a class="hs-dark-mode-active:flex hidden hs-dark-mode nav-text flex-row space-x-2"
                   href="#!" data-hs-theme-click-value="light">
                    <img src="img/sun.svg" class="injectable icon-md" alt="☀">
                    <div class="sm:hidden">Light/Dark mode</div>
                </a>
            </div>
        </div>
    </nav>
</header>
<main class="h-full w-full flex-auto flex flex-col sm:flex-row">
    <aside id="configSidebar" >
        <a class="px-4 justify-center active" href="./userConfiguration">
            <img src="img/user.svg" alt="👥" class="injectable icon-md flex-none">
            <span class="!hidden font-medium">User</span>
        </a>
        <a class="px-4 justify-center" href="./configuration">
            <img src="img/wifi.svg" alt="🖧" class="injectable icon-md flex-none">
            <span class="!hidden font-medium">Network</span>
        </a>
        <a class="px-4 justify-center" href="./hardwareConfiguration">
            <img src="img/cpu.svg" alt="🖳" class="injectable icon-md flex-none">
            <span class="!hidden font-medium">Hardware</span>
        </a>
        <a class="px-4 justify-center" href="./serverConfiguration">
            <img src="img/server.svg" alt="☁" class="injectable icon-md flex-none">
            <span class="!hidden font-medium">Server</span>
        </a>
        <div id="configSideBarClose" class="!hidden flex w-full pt-2 border-t-2 border-green-700/50">
            <button type="button" onclick="ttcClient.ui.configSidebarClose()">
                <img src="img/chevron-right.svg" alt="<" class="injectable icon-md flex-none rotate-180">
                <span class="font-medium">Close</span>
            </button>
        </div>
        <div id="configSideBarOpen" class="hidden sm:flex w-full justify-center pt-2 border-t-2 border-green-700/50">
            <button type="button" onclick="ttcClient.ui.configSidebarOpen()">
                <img src="img/chevron-right.svg" alt=">" class="injectable icon-md flex-none">
            </button>
        </div>
    </aside>
    <section id="configPageContent" class="w-full h-full sm:h-fit flex flex-row justify-center content-center">
        <div id="configPageContentContainer"
             class="container w-full sm:w-fit flex flex-row justify-center content-start px-2 sm:px-10 py-5 sm:m-5 bg-white/90 dark:bg-gray-900/80 backdrop-blur-sm sm:rounded-lg shadow-md">
            <div id="configPageContentLayout" class="w-fit h-full flex flex-col space-y-2 pt-2">
                <h2>User profile</h2>
                <div class="w-full h-full grid grid-cols-1 sm:grid-cols-2 gap-2 md:gap-3 p-5">
                    <div>
                        <div class="block input-label-top">
                            <img src="img/user.svg" alt="" class="injectable inline-block icon-md mr-1">
                            <span>Name</span>
                        </div>
                        <div id="info-name" class="requestData py-3 px-4 block w-full text-input italic"></div>
                    </div>
                    <div id="input-group-name">
                        <label for="name" class="block input-label-top">
                            <img src="img/user.svg" alt="" class="injectable inline-block icon-md mr-1">
                            <span>New name</span>
                        </label>
                        <input type="text" id="name" name="name" minlength="1" maxlength="128" data-editUserRequest="true"
                               class="requestData py-3 px-4 block w-full text-input">
                    </div>
                    <div id="input-group-password">
                        <div class="flex justify-between items-center">
                            <label for="password" class="block input-label-top">
                                <img src="img/key.svg" alt="🔑" class="injectable inline-block icon-md mr-1">
                                <span>New password</span>
                            </label>
                        </div>
                        <input type="password" id="password" name="password" minlength="1" maxlength="128" data-editUserRequest="true"
                               class="requestData py-3 px-4 block w-full text-input">
                    </div>
                    <div id="input-group-password_confirmed">
                        <div class="flex justify-between items-center">
                            <label for="password_confirmed" class="block input-label-top">
                                <img src="img/key.svg" alt="🔑" class="injectable inline-block icon-md mr-1">
                                <span>Confirm new password</span>
                            </label>
                        </div>
                        <input type="password" id="password_confirmed" name="password_confirmed" minlength="1" maxlength="128" data-editUserRequest="true"
                               class="requestData py-3 px-4 block w-full text-input">
                    </div>
                </div>
                <button id="editUserButton" type="button" onclick="ttcClient.editUser()" class="button-save w-full sm:w-1/2 self-center !mt-5 disabled:control-disabled">
                    <img src="img/floppy.svg" alt="💾" class="injectable icon-md">
                    <span>Save</span>
                </button>
                <button id="editUserButtonLoader" type="button" onclick=""
                        class="!hidden button-save !mt-5">
                    <img src="img/loader.svg" class="injectable icon-loader" alt="loading...">
                </button>

                <h2>Delete Account</h2>
                <div class="p-5">This action is permanent and restoring your account after deletion will not be possible!</div>
                <button id="deleteUserConfirmButton" type="button" class="button-delete w-full sm:w-1/2 self-center !mt-5 disabled:control-disabled"
                        onclick="ttcClient.ui.openModal('deleteConfirm','Confirm delete','Are you sure you want to delete your account? This action is permanent and your account can not be restored later.')"
                >
                    <img src="img/trash-x.svg" alt="🗑" class="injectable icon-md">
                    <span>Delete</span>
                </button>

                <h2>New User</h2>
                <div class="w-full h-full flex flex-col items-center space-y-2 p-5">
                    <div id="input-group-register-name" class="w-full sm:w-2/3 md:w-1/2">
                        <label for="reg_name" class="block input-label-top">
                            <img src="img/user.svg" alt="" class="injectable inline-block icon-md mr-1">
                            <span>Name</span>
                        </label>
                        <input type="text" id="reg_name" name="name" minlength="1" maxlength="128" data-registerUserRequest="true"
                               class="requestData py-3 px-4 block w-full text-input">
                    </div>
                    <div id="input-group-register-password" class="w-full sm:w-2/3 md:w-1/2">
                        <div class="flex justify-between items-center">
                            <label for="reg_password" class="block input-label-top">
                                <img src="img/key.svg" alt="🔑" class="injectable inline-block icon-md mr-1">
                                <span>Password</span>
                            </label>
                        </div>
                        <input type="password" id="reg_password" name="password" minlength="1" maxlength="128" data-registerUserRequest="true"
                               class="requestData py-3 px-4 block w-full text-input">
                    </div>
                    <div id="input-group-register-password-confirm" class="w-full sm:w-2/3 md:w-1/2">
                        <div class="flex justify-between items-center">
                            <label for="reg_password_confirmed" class="block input-label-top">
                                <img src="img/key.svg" alt="🔑" class="injectable inline-block icon-md mr-1">
                                <span>Confirm password</span>
                            </label>
                        </div>
                        <input type="password" id="reg_password_confirmed" name="password_confirmed" minlength="1" maxlength="128" data-registerUserRequest="true"
                               class="requestData py-3 px-4 block w-full text-input">
                    </div>
                </div>
                <button id="registerUserButton" type="button" onclick="ttcClient.registerUser()" class="button-save w-full sm:w-1/2 self-center !mt-5 disabled:control-disabled">
                    <img src="img/user-plus.svg" alt="+" class="injectable icon-md">
                    <span>Register</span>
                </button>
                <button id="registerUserButtonLoader" type="button" onclick=""
                        class="!hidden button-save !mt-5">
                    <img src="img/loader.svg" class="injectable icon-loader" alt="loading...">
                </button>
            </div>
        </div>
    </section>
</main>
<footer class="text-gray-100 dark:text-gray-300 bg-green-700 dark:bg-green-900 border-t border-green-800/50 dark:border-green-700/50">
    <div class="max-w-[85rem] py-7 px-4 sm:px-6 lg:px-8 mx-auto">
        <!-- Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 items-center gap-5 text-center">
            <div class="flex flex-row space-x-2 items-center">
                <img src="./img/TTC_logo_fillcolor.svg" class="injectable w-9 h-9" alt="TTC">
                <p class="flex-none text-xl font-semibold">Thor Tea Cooler v1.0</p>
            </div>

            <ul class="text-center">
                <li class="inline-block relative pr-8">
                    <a class="inline-flex gap-x-2 hover:text-white hover:underline hover:underline-offset-4" href="./">
                        Tea Cooler
                    </a>
                </li>
                <li class="inline-block relative pr-8">
                    <a class="inline-flex gap-x-2 hover:text-white hover:underline hover:underline-offset-4" href="./configuration">
                        Configuration
                    </a>
                </li>
            </ul>
            <div class="md:text-right space-x-2">
                <a href="https://github.com/HodoArmand/thor-tea-cooler-frontend-basic"
                   class="inline-flex justify-center items-center text-center p-2 text-base hover:text-white hover:underline hover:underline-offset-4">
                    <img src="img/github.svg" alt="Github" class="injectable icon-lg mr-1">
                    <div>Github</div>
                </a>
            </div>
        </div>
    </div>
</footer>

<!--Modals-->
<section id="infoModal" class="hs-overlay hidden modalSection">
    <div class="modalWrapper">
        <div class="modalCard">
            <div class="modalHeader">
                <div class="flex inline-flex space-x-2 text-gray-800 dark:text-white">
                    <img src="img/info-square.svg" class="injectable inline icon-md" alt="Info">
                    <h3 id="infoModalTitle" class="font-bold">
                        Modal title
                    </h3>
                </div>
                <button type="button" onclick="ttcClient.ui.closeModal('info')"
                        class="hs-dropdown-toggle inline-flex flex-shrink-0 justify-center items-center icon-xl rounded-md text-gray-500 hover:text-gray-400 text-sm">
                    <span class="sr-only">Close</span>
                    <img src="img/nav-menu-opened.svg" alt="X" class="icon-sm injectable">
                </button>
            </div>
            <div class="p-4 overflow-y-auto space-y-4">
                <p id="infoModalDesc" class="mt-1 text-gray-800 dark:text-gray-400">
                    Desc
                </p>
            </div>
            <div class="flex justify-end items-center border-t dark:border-gray-700 rounded-b-lg">
                <button type="button" onclick="ttcClient.ui.closeModal('info')" class="modalButton">
                    OK
                </button>
            </div>
        </div>
    </div>
</section>

<section id="deleteConfirmModal" class="hs-overlay hidden modalSection">
    <div class="modalWrapper">
        <div class="modalCard">
            <div class="modalHeader">
                <div class="flex inline-flex space-x-2 text-gray-800 dark:text-white">
                    <img src="img/alert-octagon.svg" class="injectable inline icon-md" alt="Alert">
                    <h3 id="deleteConfirmModalTitle" class="font-bold">
                        Modal title
                    </h3>
                </div>
                <button type="button" onclick="ttcClient.ui.closeModal('deleteConfirm')"
                        class="hs-dropdown-toggle inline-flex flex-shrink-0 justify-center items-center icon-xl rounded-md text-gray-500 hover:text-gray-400 text-sm">
                    <span class="sr-only">Close</span>
                    <img src="img/nav-menu-opened.svg" alt="X" class="icon-sm injectable">
                </button>
            </div>
            <div class="p-4 overflow-y-auto space-y-4">
                <p id="deleteConfirmModalDesc" class="mt-1 text-gray-800 dark:text-gray-400">
                    Desc
                </p>
            </div>
            <div class="w-full h-full flex flex-col items-center space-y-2 pt-3 pb-5">
                <div id="input-group-delete-password" class="w-full sm:w-2/3 md:w-1/2">
                    <div class="flex justify-between items-center">
                        <label for="del_password" class="block input-label-top">
                            <img src="img/key.svg" alt="🔑" class="injectable inline-block icon-md mr-1">
                            <span>Password</span>
                        </label>
                    </div>
                    <input type="password" id="del_password" name="password" minlength="1" maxlength="128" data-deleteUserRequest="true"
                           class="requestData py-3 px-4 block w-full text-input">
                </div>
                <div id="input-group-delete-password-confirm" class="w-full sm:w-2/3 md:w-1/2">
                    <div class="flex justify-between items-center">
                        <label for="del_password_confirmed" class="block input-label-top">
                            <img src="img/key.svg" alt="🔑" class="injectable inline-block icon-md mr-1">
                            <span>Confirm password</span>
                        </label>
                    </div>
                    <input type="password" id="del_password_confirmed" name="password_confirmed" minlength="1" maxlength="128" data-deleteUserRequest="true"
                           class="requestData py-3 px-4 block w-full text-input">
                </div>
            </div>
            <div class="flex justify-end items-center border-t dark:border-gray-700 rounded-b-lg">
                <button id="deleteUserButton" type="button" onclick="ttcClient.deleteUser()" class="modalButtonHalfLeft">
                    Yes, delete.
                </button>
                <button id="deleteUserButtonLoader" type="button" onclick="ttcClient.deleteUser()" class="modalButtonHalfLeft !hidden">
                    <img src="img/loader.svg" class="injectable icon-loader" alt="loading...">
                </button>
                <button type="button" onclick="ttcClient.ui.closeModal('deleteConfirm')" class="modalButtonHalfRight">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</section>

<!--Body scripts-->
<script src="js/lib/preline.js"></script>
<script defer>
    SVGInject(document.querySelectorAll("img.injectable"));
</script>

</body>
</html>

<script>

    window.onload = () =>
    {
        if (window.ttcClient.api.auth.apiKey === 'unset')
        {
            window.location.replace('./login');
        }
        else
        {
            ttcClient.checkAuth();
            window.ttcClient.ui.initializeStyledNumberInputs();
            document.getElementById("info-name").innerText = localStorage.getItem("ttcUserName");
        }
    }
</script>